@model IEnumerable<Omni.Agence.DAL.Local>

@{
    ViewBag.Title = "Liste des Locaux";
    ViewBag.PL1 = "start active open";
    ViewBag.PLL = "active";
    ViewBag.PL3 = "selected";
}


<h3 class="page-title">
    Local <small>Liste</small>
</h3>
<div class="page-bar">
    <ul class="page-breadcrumb">
        <li>
            <i class="fa fa-home"></i>
            <a href="@Url.Action("Index","Home")">Accueil</a>
            <i class="fa fa-angle-right"></i>
        </li>
        <li>
            <i class="fa fa-user"></i><a href="@Url.Action("Index")">Local</a>
            <i class="fa fa-angle-right"></i>
        </li>

    </ul>

</div>
<div class="row">
    <div class="col-md-12">
        <div class="portlet box green">
            <div class="portlet-title">
                <div class="caption">
                    <i class="fa fa-edit"></i>Tous les locaux
                </div>
                <div class="tools">
                    <a href="javascript:;" class="collapse">
                    </a>
                    
                </div>
            </div>
            <div class="portlet-body">
                <div class="table-toolbar">
                    @using (Html.BeginForm())
                    {
                        <div class="note note-success">
                            <h4 class="block">Recherche Avancée</h4>

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="control-label col-md-3"></label>
                                        <div class="col-md-8">
                                            <div class="input-group">
                                                <input type="text" class="form-control input-circle-left" id="lieuxlocal" name="lieuxlocal" placeholder="Lieux:   Ville,Quartier" value="@ViewBag.lieux">
                                                <span class="input-group-addon input-circle-right">
                                                    <i class="fa fa-map-marker"></i>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        @*<label class="control-label col-md-3"></label>*@
                                        <div class="col-md-5">
                                            <div class="input-group">
                                                <input type="number" min="0" class="form-control input-circle-left" id="minprix" name="minprix" placeholder="Min" value="@ViewBag.minprix">
                                                <span class="input-group-addon input-circle-right">
                                                    <i class="fa">DH</i>
                                                </span>
                                            </div>

                                        </div>
                                        <div class="col-md-5">
                                            <div class="input-group">

                                                <input type="number" min="0" class="form-control input-circle-left" id="maxprix" name="maxprix" placeholder="Max" value="@ViewBag.maxprix">
                                                <span class="input-group-addon input-circle-right">
                                                    <i class="fa">DH</i>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="control-label col-md-3"></label>
                                        @*<div class="col-md-4">
                                                <select class="form-control" id="typelocal" name="typelocal">
                                                    <option value="CIN">Appartement</option>
                                                    <option value="Carte Séjour">Villa</option>
                                                    <option value="Passport">Maison</option>
                                                    <option value="Passport">Boutique</option>
                                                    <option value="Passport">Bureau</option>
                                                </select>
                                            </div>*@
                                        <div class="col-md-4">
                                            <input type="number" class="form-control input-circle" id="nbrchambre" min="0" max="20" name="nbrchambre" placeholder="Pièces" value="@ViewBag.pieces" />
                                        </div>
                                        <div class="col-md-4">
                                            <input type="submit" class="btn btn-circle green" value="Rechercher" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        @*<label class="control-label col-md-3"></label>*@

                                        <div class="col-md-5">
                                            <div class="input-group">
                                                <input type="number" min="0" class="form-control input-circle-left" id="minsurface" name="minsurface" placeholder="Min" value="@ViewBag.minsurface">
                                                <span class="input-group-addon input-circle-right">
                                                    <i class="fa">M²</i>
                                                </span>
                                            </div>
                                        </div>
                                        <div class="col-md-5">
                                            <div class="input-group">
                                                <input type="number" min="0" class="form-control input-circle-left" id="maxsurface" name="maxsurface" placeholder="Max" value="@ViewBag.maxsurface">
                                                <span class="input-group-addon input-circle-right">
                                                    <i class="fa">M²</i>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                </div>
                <div class="table-toolbar">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="btn-group">
                                <a href="@Url.Action("Create")" class="btn green tooltips" data-placement="bottom" data-original-title="Nouveau Local">
                                    <i class="fa fa-plus"></i>
                                </a>
                                <br />
                            </div>
                        </div>

                    </div>
                </div>
                <table class="table table-striped table-hover table-bordered" id="sample_editable_2">
                    <thead>
                        <tr>
                            <th>
                                M²
                            </th>
                            <th>
                                Pièces
                            </th>

                            <th>
                                Titre
                            </th>

                            <th>
                                Prix
                            </th>

                            <th>
                                Quartier
                            </th>
                            <th>
                                Ville
                            </th>
                            <th>
                                Immeuble
                            </th>
                            <th>
                                Propriétaire
                            </th>
                            <th>
                                Type
                            </th>
                            <th>Disponibilté</th>
                            <th>Actions</th>
                        </tr>

                    </thead>
                    <tbody>
                        @foreach (var item in Model)
                        {
                            <tr>
                                <td>
                                    @Html.DisplayFor(modelItem => item.SuperficieLocal)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.NbrPieceLocal)
                                </td>

                                <td>
                                    @Html.DisplayFor(modelItem => item.TitreLocal)
                                </td>

                                <td>
                                    @Html.DisplayFor(modelItem => item.PrixRefLocationLocal)
                                </td>

                                <td>
                                    @Html.DisplayFor(modelItem => item.Adresse.quartier)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Adresse.Ville)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Immeuble.NomImmeuble)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Personne.nom) @Html.DisplayFor(modelItem => item.Personne.prenom)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem =>item.TypeLocal.Description)
                                </td>
                                <td>
                                @{
                            if (Html.DisplayFor(modelItem => item.Staut).ToString()=="0")
                            {
                                ViewBag.dispo = "success";
                                ViewBag.ico = "fa-check-square";
                                ViewBag.chaine = "Oui ";
                                //ViewBag.SuppLocal = Html.ActionLink("Supprimer", "Delete", new { id = item.CodeLocal });
                                ViewBag.SuppLocal = Url.Action("Delete", new { id = item.CodePers });
                                
                            }
                            else if (Html.DisplayFor(modelItem => item.Staut).ToString()=="1")
                            {
                                ViewBag.dispo = "danger";
                                ViewBag.ico = "fa-minus-square";
                                ViewBag.chaine = "Non";
                                ViewBag.SuppLocal = "";
                                
                            }
                                    
                                }<center>
                                <span class="label label-sm label-@ViewBag.dispo">
                                    <i class="fa @ViewBag.ico"></i> @ViewBag.chaine </span></center></td>
                                <td>
                                    @*@Html.ActionLink("Details", "Details", new { id = item.CodeLocal }) |
                                    @ViewBag.SuppLocal*@

                                    <a href="@Url.Action("Details", new { id = item.CodeLocal }) " class="btn default btn-xs green">
                                        <i class="fa fa-edit"></i>
                                    </a>
                                    <a href="@ViewBag.SuppLocal" class="btn default btn-xs black">
                                        <i class="fa fa-trash-o"></i>
                                    </a>
                                </td>
                            </tr>
                        }
                    </tbody>


                </table>
            </div>


        </div>
    </div>
</div>